---
title: JS箭头函数
data: 2020-10-25 09:55
tags: 
- es6
- javascript
- 前端
---
使用箭头函数语法可以使得表达式变得简洁
```
let foo = a => a;等价于
let foo = function(a) {
    return a;
}
```
当需要多个参数或者不需要参数的时候，参数部分写为圆括号
```
let foo = () => a;等价于
let foo = function() {
    return a;
}
```
如果箭头函数返回一个对象，那么在返回值的位置需要加上圆括号 (因为返回的那个对象的大括号由于语法设置，会被识别为代码块的大括号)
```
let foo = gender => ({ name: "reton", gender: gender })
```
如果箭头函数代码块需要多个语句，则应该使用大括号，并使用return
```
let foo = (a, b) => { return a * b; }
```

**箭头函数在特殊的地方在于它的this指向。它的this指向该函数定义时候的作用域，而不是它运行时的作用域。**
典型的箭头函数this指向例子
```
function Timer() {
    this.s1 = 0;
    this.s2 = 0;
    setInterval(() => this.s1++, 1000); //箭头函数定义时
    setInterval(function() { //普通函数定义时候
        this.s2++;
    }, 1000);
}

let timer = new Timer();

setTimeout(() => console.log("s1:", timer.s1), 1000); //箭头函数运行时候
setTimeout(function() {
    console.log("s2:", timer.s2);
}, 1000); //普通函数运行时
s1: 3
s2: 0
结论： s1：定义时候距离输出的时候过去了3100ms，所以加3，输出3
       s2: 运行时候距离输出过去了0ms（输出它就是调用它即运行时），所以输出0
```
箭头函数this指向的固定化原因是因为箭头函数根本久灭有自己的this，所以箭头函数内部的this就是外层代码块的this。因为箭头函数没有this，所以不能用作构造函数。
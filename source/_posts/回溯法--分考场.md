---
title: 回溯法--分考场
date: 2020-9--8 12:19:00
tags:
- 算法
- 回溯法
---

# 算法题之回溯法

>题目链接：http://lx.lanqiao.cn/problem.page?gpid=T457

根据数据量n<100可以判断这道题适合使用回溯法。

*思路是：*
    在for循环中每一次对递归进来的stu同学判断1到sum中这几个教室哪一个是可以让stu同学进去的，然后利用回溯法的思维，撤销选择，继续循环，在每一次递归结束时记录下最小的教室数。如果一个for循环走完了都没找到可以让stu同学进去的教室，那么就在for循环结束后多开一间教室让stu同学进入。

要素：
1. 结束条件： stu == n 此时已经到达最底层
2. 剪枝： sum >= ans

代码:
1. 变量说明
+ ans： 返回值
+ int []room，下标表示学生，数值表示学生所处的教室
+ boolean [][]g 表示各个学生之间的关系，true表示两个学生不可以同一间教室
2. 算法：
```
public static boolean judge(int i, int sum) {
    for (int j = 0; j < n; j++) {
        if (room[j] == sum && g[i][j] == true) {
            return false;
        }
    }
    return true;
}

//算法框架
public static void f(int stu, int sum) { //当前k处于sum教室
    	if (sum >= ans) { //如果sum已经大于答案了那么就没有必要继续回溯了
    		return ;
    	}
    	if (stu == n) { //已经变为最后一个人
    		ans = Math.min(ans, sum);
    		return ;
    	}
    	for (int i = 1; i <= sum; i++) { //寻找可以和stu同学加入一个教室的
    		if (judge(stu, i)) { //判断stu可不可以在i教室
    			//做选择
    			room[stu] = i;
    			f(stu+1, sum);
    			//撤销选择
    			room[stu] = 0; //0代表没有加入任何教室
    		} 
    	}
    	room[stu] = sum+1;
    	f(stu+1, sum+1);
    	room[stu] = 0;
    }
```
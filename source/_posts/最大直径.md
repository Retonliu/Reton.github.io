---
title: 二叉树的直径
date: 2020-11-17 21:57
tags:
- javascript
---
>题目地址：https://leetcode-cn.com/problems/diameter-of-binary-tree/

思路：首先定义一个全局的变量用于在递归的过程中记录最大值。然后定义一个深度递归函数。在递归的过程中，如果当前节点不是空的，那么分别对左右节点进行递归，计算出左右节点分别有多少个节点。每一次刷新全局变量最大值，比较左右节点数+1与上一个max的值。这里要加一是因为节点数还要包含父节点自身。然后返回左右节点中比较大的那个节点加上一，这里加一也是包含父节点在内，即返回的就是包含当前节点在内的最大路径（因为我们要取的是最大值，所以需要的就是最大值）。 在被系统调用的函数里面调用递归函数，最后返回max值减一，因为max值表示的是最大的节点数，而直径是节点数减去一。 

代码：
```
/**
 * Definition for a binary tree node.
 * function TreeNode(val) {
 *     this.val = val;
 *     this.left = this.right = null;
 * }
 */
/**
 * @param {TreeNode} root
 * @return {number}
 */

let max = 1; //因为返回结果的时候会减去一，所以这里初始值应该是1，不然如果root为空，返回的是-1，不符合常理。
var diameterOfBinaryTree = function(root) {
    max;
    dfs(root);
    return max-1; //这里要减去一，长度等于节点数减去一
};

function dfs(node) {
    if (node === null) {
        return 0;
    }
    //左右两边的长度
    let left = dfs(node.left), 
        right = dfs(node.right);
    max = Math.max(max, left + right + 1); //加1表示加上当前节点
    return Math.max(left, right) + 1; //加1表示加上当前节点
}
```